#
# Linux/i386 6.1.19 Kernel Configuration
#

# Enable 9P
CONFIG_NET_9P=y
CONFIG_NET_9P_VIRTIO=y
CONFIG_NET_9P_DEBUG=y
CONFIG_VIRTIO=y
CONFIG_VIRTIO_PCI=y
CONFIG_9P_FS=y
CONFIG_9P_FSCACHE=y
CONFIG_9P_FS_POSIX_ACL=y

# Enable kernel logging.
CONFIG_PRINTK=y
CONFIG_EARLY_PRINTK=y

# Enable ext4.
CONFIG_EXT4_FS=y

# Enable serial console
CONFIG_SERIAL_DEV_BUS=y
CONFIG_SERIAL_DEV_CTRL_TTYPORT=y
CONFIG_SERIAL_EARLYCON=y
CONFIG_SERIAL_CORE=y
CONFIG_SERIAL_CORE_CONSOLE=y

# Extra baggage. Disable.
CONFIG_ACPI=n
CONFIG_MODULE_SIG=n
CONFIG_MODULE_COMPRESS_NONE=y

# Compression is very slow in v86. Don't compress the kernel at all.
CONFIG_KERNEL_UNCOMPRESSED=y
CONFIG_KERNEL_GZIP=n
CONFIG_INITRAMFS_COMPRESSION_NONE=y

# Enable shebang support.
CONFIG_BINFMT_SCRIPT=y

# Slight optimizations for our v86 environment.
CONFIG_X86_GENERIC=y

# Bare minimum NixOS requirements.
CONFIG_DEVTMPFS=y
CONFIG_CGROUPS=y
CONFIG_SIGNALFD=y
CONFIG_TIMERFD=y
CONFIG_EPOLL=y
CONFIG_NET=y
CONFIG_SYSFS=y
CONFIG_PROC_FS=y
CONFIG_FHANDLE=y
CONFIG_CRYPTO_USER_API_HASH=y
CONFIG_CRYPTO_HMAC=y
CONFIG_CRYPTO_SHA=y
CONFIG_CRYPTO_SHA256=y
CONFIG_DMIID=y
CONFIG_AUTOFS=y
CONFIG_AUTOFS4_FS=y
CONFIG_TMPFS_POSIX_ACL=y
CONFIG_TMPFS_XATTR=y
CONFIG_SECCOMP=y
CONFIG_TMPFS=y
CONFIG_BLK_DEV_INITRD=y
CONFIG_MODULES=y
CONFIG_BINFMT_ELF=y
CONFIG_UNIX=y
CONFIG_INOTIFY_USER=y

